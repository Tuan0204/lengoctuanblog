{{- define "title" -}}
    {{- (T .Data.Plural) | default .Data.Plural -}} - {{ .Site.Title -}}
{{- end -}}

{{- define "content" -}}
  {{- $taxonomies := .Data.Plural -}}
  {{- $type := .Type -}}

  {{- if eq $taxonomies "categories" -}}
    <div class="page archive">
      <h2 class="single-title animate__animated animate__pulse animate__faster">
        {{- .Params.Title | default (T $taxonomies) | default $taxonomies | dict "Some" | T "allSome" -}}
      </h2>

      <div class="categories-card">
        {{- $terms := .Data.Terms.ByCount -}}
        {{- range $terms -}}
          {{- $term := .Term -}}
          {{- $pages := .Pages -}}
          {{- with $.Site.GetPage "taxonomy" (printf "%v/%v" $type $term) -}}
            <div class="card-item">
              <div class="card-item-wrapper">
                <h3 class="card-item-title">
                  <a href="{{ .RelPermalink }}">
                    <i class="far fa-folder fa-fw" aria-hidden="true"></i>&nbsp;{{ .Page.Title }}
                  </a>
                </h3>
                {{- range first 5 $pages -}}
                  <article class="archive-item">
                    <a href="{{ .RelPermalink }}" class="archive-item-link">
                      {{- .Title | emojify -}}
                    </a>
                  </article>
                {{- end -}}
                {{- if gt (len $pages) 5 -}}
                  <span class="more-post">
                    <a href="{{ .RelPermalink }}" class="more-single-link">{{ T "more" }} &gt;&gt;</a>
                  </span>
                {{- end -}}
              </div>
            </div>
          {{- end -}}
        {{- end -}}
      </div>
    </div>

  {{- else if eq $taxonomies "tags" -}}
    <div class="page archive terms-index">
      <h2 class="single-title">{{ T "All Tags" | default "All Tags" }}</h2>

      <div class="terms-grid">
        {{- range .Data.Terms.Alphabetical -}}
          {{- $term := . -}}
          <article class="term-card">
            <h3 class="term-title">
              <a href="{{ $term.Page.Permalink }}">{{ $term.Term }}</a>
              <span class="term-count">{{ $term.Count }}</span>
            </h3>
            {{- $pages := first 2 $term.Pages -}}
            {{- if gt (len $pages) 0 -}}
              <ul class="term-sample-list">
                {{- range $pages -}}
                  <li><a href="{{ .RelPermalink }}">{{ .Title | emojify }}</a></li>
                {{- end -}}
              </ul>
            {{- else -}}
              <p class="no-sample">No posts</p>
            {{- end -}}
          </article>
        {{- end -}}
      </div>
    </div>

  {{- else -}}
    <!-- fallback: show tag cloud as a safe default -->
    <div class="page archive">
      <h2 class="single-title">{{ .Title }}</h2>
      <div class="tag-cloud-tags">
        {{- range $.Site.Taxonomies.tags.ByCount -}}
          <a href="{{ .Page.RelPermalink }}">{{ .Page.Title }} <sup>{{ .Count }}</sup></a>
        {{- end -}}
      </div>
    </div>
  {{- end -}}
{{- end -}}
